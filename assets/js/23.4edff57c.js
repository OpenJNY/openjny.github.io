(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{217:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v('Brendan Gregg æ°ã®ãƒãƒ³ã‚ºã‚ªãƒ³ ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— "bpf-perf-workshop" ã‚ˆã‚Šã€SSH çµŒç”±ã®ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹èª²é¡Œ "lab2" ã‚’ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚')]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#èª²é¡Œ"}},[s._v("èª²é¡Œ")])]),a("li",[a("a",{attrs:{href:"#ãƒ©ãƒœç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"}},[s._v("ãƒ©ãƒœç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—")])]),a("li",[a("a",{attrs:{href:"#before-ssh-çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬"}},[s._v("Before: ssh çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬")])]),a("li",[a("a",{attrs:{href:"#èª¿æŸ»æ–¹é‡"}},[s._v("èª¿æŸ»æ–¹é‡")])]),a("li",[a("a",{attrs:{href:"#ãƒ­ã‚°ã®åé›†"}},[s._v("ãƒ­ã‚°ã®åé›†")]),a("ul",[a("li",[a("a",{attrs:{href:"#æ¡å–å¾Œã®æ•´å½¢"}},[s._v("æ¡å–å¾Œã®æ•´å½¢")])])])]),a("li",[a("a",{attrs:{href:"#åˆ†æ"}},[s._v("åˆ†æ")]),a("ul",[a("li",[a("a",{attrs:{href:"#cpu-è¦³ç‚¹ã§ã®èª¿æŸ»"}},[s._v("CPU è¦³ç‚¹ã§ã®èª¿æŸ»")])]),a("li",[a("a",{attrs:{href:"#ãƒ¡ãƒ¢ãƒªè¦³ç‚¹ã®èª¿æŸ»"}},[s._v("ãƒ¡ãƒ¢ãƒªè¦³ç‚¹ã®èª¿æŸ»")])]),a("li",[a("a",{attrs:{href:"#ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€i-o-è¦³ç‚¹ã®èª¿æŸ»"}},[s._v("ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€I/O è¦³ç‚¹ã®èª¿æŸ»")])]),a("li",[a("a",{attrs:{href:"#ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦³ç‚¹ã®èª¿æŸ»"}},[s._v("ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦³ç‚¹ã®èª¿æŸ»")])]),a("li",[a("a",{attrs:{href:"#ä¸€æ¬¡è¦‹è§£"}},[s._v("ä¸€æ¬¡è¦‹è§£")])])])]),a("li",[a("a",{attrs:{href:"#å¯¾å¿œç­–"}},[s._v("å¯¾å¿œç­–")]),a("ul",[a("li",[a("a",{attrs:{href:"#after-ssh-çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬"}},[s._v("After: ssh çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬")])])])]),a("li",[a("a",{attrs:{href:"#ã¾ã¨ã‚"}},[s._v("ã¾ã¨ã‚")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"èª²é¡Œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èª²é¡Œ"}},[s._v("#")]),s._v(" èª²é¡Œ")]),s._v(" "),a("p",[s._v("ä»Šå›ã®å•é¡Œã¯ã“ã¡ã‚‰ã€‚")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/brendangregg/bpf-perf-workshop/blob/master/lab2.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("bpf-perf-workshop/lab2.md at master Â· brendangregg/bpf-perf-workshop"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("Problem Statement\nUnder load, it can take a few seconds to login to your lab system via SSH. Even when idle, it can take 1-2 seconds. Why does it take this long on an idle system, and how can this login time be reduced?")])]),s._v(" "),a("p",[s._v("è² è·ã®é«˜ã„ã‚·ã‚¹ãƒ†ãƒ ã« SSH ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ãã€ãƒ­ã‚°ã‚¤ãƒ³ã«æ™‚é–“ãŒã‹ã‹ã‚‹ (æ•°ç§’è¦ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹) ã®ã¯ãªãœ? ã¨ã„ã†èª²é¡Œã€‚")]),s._v(" "),a("h2",{attrs:{id:"ãƒ©ãƒœç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ãƒ©ãƒœç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"}},[s._v("#")]),s._v(" ãƒ©ãƒœç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—")]),s._v(" "),a("p",[s._v("ã“ã®èª²é¡Œã¯ã€è² è·ã®é«˜ã„ (under load ã¨è¡¨ç¾ã•ã‚Œã‚‹) ãƒ©ãƒœç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹ã¨ã“ã‚ã‹ã‚‰å§‹ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚")]),s._v(" "),a("p",[s._v('"è² è·" ãŒæ„å‘³ã™ã‚‹ã¨ã“ã‚ãŒã‚ã‹ã‚‰ãšæˆ¸æƒ‘ã£ãŸãŒã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã®æ–‡è„ˆã‚’èª­ã¿è§£ãã«ã€ãŠãã‚‰ã '),a("code",[s._v("lab001")]),s._v(" ã‚’å®Ÿè¡Œã•ã›ãŸçŠ¶æ…‹ã‚’ under load ã‚’è¨€ã£ã¦ã„ã‚‹ã«é•ã„ãªã„ã€‚ã¨ã„ã†ã“ã¨ã§ã€I/O è² è·ã‚’ç™ºç”Ÿã•ã›ã‚‹ã€‚ãªã‚“ã¨ãªãã€"),a("code",[s._v("lab001")]),s._v(" ã‚’ 2 ã¤èµ·å‹•ã•ã›ã¦ã¿ãŸã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("root@vm-ubuntu: ~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./bpf-perf-workshop/lab001 &")]),s._v("\nroot@vm-ubuntu: ~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./bpf-perf-workshop/lab001 &")]),s._v("\n")])])]),a("p",[s._v("ã„ã„æ„Ÿã˜ã«è² è·ã¿ã‚’æ„Ÿã˜ã¦ã„ã‚‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("root@vm-ubuntu:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uptime")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":37:40 up  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":23,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" users,  load average: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.00")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.98")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.68")]),s._v("\n\nroot@vm-ubuntu:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /proc/pressure/io")]),s._v("\nsome "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("avg10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("73.11")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("avg60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("70.48")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("avg300")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("72.26")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("total")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11215650634")]),s._v("\nfull "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("avg10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("73.10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("avg60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("70.40")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("avg300")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("72.17")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("total")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11194499828")]),s._v("\n\nroot@vm-ubuntu:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vmstat -S M 1")]),s._v("\nprocs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b   swpd   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("   buff  cache   si   so    bi    bo   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("   cs us sy "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" wa st\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14816")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("791")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("680")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("124")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("93")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14816")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("791")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3824")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("579")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1960")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14816")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("791")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3920")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("619")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14816")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("791")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1920")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("741")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2059")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14816")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("791")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1756")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("645")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1909")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("93")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nroot@vm-ubuntu:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iostat -xz 1")]),s._v("\n avg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.50")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.35")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("86.15")]),s._v("\n\nDevice            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util\nsda              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("376.00")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4032.00")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("124.00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.80")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.70")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.63")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.72")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.66")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n")])])]),a("h2",{attrs:{id:"before-ssh-çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-ssh-çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬"}},[s._v("#")]),s._v(" Before: ssh çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬")]),s._v(" "),a("p",[s._v("æ‰‹å…ƒã®ãƒã‚·ãƒ³ã‹ã‚‰ã€ssh çµŒç”±ã® "),a("code",[s._v("echo hello")]),s._v(" ã«ã‹ã‹ã‚‹æ™‚é–“ã‚’è¨ˆæ¸¬ã—ã¦ã¿ã‚‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("openjny@local-machine:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" openjny@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("lab-machine"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" -i id_rsa "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" hello\nhello\n\nreal    0m1.489s\nuser    0m0.057s\nsys     0m0.002s\n")])])]),a("p",[s._v("ä½•å›ã‹è¨ˆæ¸¬ã—ã¦ã¿ãŸã‘ã©ã€ãŸã—ã‹ã« "),a("code",[s._v("echo hello")]),s._v(" ã™ã‚‹ã ã‘ã§ 1 ~ æ•°ç§’ã®æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚é€Ÿã„ã®ã‹é…ã„ã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„ã‘ã©ã€eBPF ã‚’ä½¿ã£ã¦ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã®ç‰¹å®šã¨é«˜é€ŸåŒ–ã‚’è©¦ã¿ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚")]),s._v(" "),a("h2",{attrs:{id:"èª¿æŸ»æ–¹é‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èª¿æŸ»æ–¹é‡"}},[s._v("#")]),s._v(" èª¿æŸ»æ–¹é‡")]),s._v(" "),a("p",[s._v("ä»Šå›ã®åˆ†æå¯¾è±¡ã¯ã€Œç”Ÿå­˜æœŸé–“ã®çŸ­ã„ãƒ—ãƒ­ã‚»ã‚¹ã§ã‚ã‚Šã€äº‹å‰ã«èª¿æŸ»å¯¾è±¡ã® PID ãŒã‚ã‹ã£ã¦ã„ãªã„ã€ã¨ã„ã†ã®ãŒæœ€å¤§ã®ç‰¹å¾´ã€‚ãã®ãŸã‚ã€æ•°ç§’ãŠãã« stats ã‚’å‡ºã™ãƒ„ãƒ¼ãƒ« (e.g. vmstat) ã‚ˆã‚Šã‚‚ã€"),a("strong",[s._v("ã‚¤ãƒ™ãƒ³ãƒˆ ãƒ‰ãƒªãƒ–ãƒ³ãª")]),s._v("åˆ†æãƒ„ãƒ¼ãƒ«ãŒåŸå› ç©¶æ˜ã®éµã‚’æ¡ã‚Šãã†ã€‚ã¾ãšã¯ã€å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ¬¡ã®ç¢ºèªã‚’é€²ã‚ãŸã„ã€‚")]),s._v(" "),a("ul",[a("li",[s._v("CPU: ãƒ—ãƒ­ã‚»ã‚¹/ã‚¹ãƒ¬ãƒƒãƒ‰ã®èª•ç”Ÿã¨çµ‚äº†ã€ç”Ÿå­˜æœŸé–“")]),s._v(" "),a("li",[s._v("ãƒ¡ãƒ¢ãƒª: ãƒšãƒ¼ã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®é–‹æ”¾æœ‰ç„¡")]),s._v(" "),a("li",[s._v("ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€I/O: æ–°ãŸã« "),a("code",[s._v("open")]),s._v(" ã•ã‚ŒãŸ file ã®æœ‰ç„¡ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã¸ã®(ç‰©ç†) I/O ç™ºç”ŸçŠ¶æ³")]),s._v(" "),a("li",[s._v("ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: ESTABLISH ã«è¦ã—ãŸæ™‚é–“ã€ãƒ‘ã‚±ãƒƒãƒˆãƒ‰ãƒ­ãƒƒãƒ—/å†é€ã®é‡ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®ç™ºç”ŸçŠ¶æ³")])]),s._v(" "),a("p",[s._v("ä½¿ãˆãã†ãª bcc ã®ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚")]),s._v(" "),a("ul",[a("li",[s._v("(cpu) execsnoop, exitsnoop")]),s._v(" "),a("li",[s._v("(memory) drsnoop, shmsnoop")]),s._v(" "),a("li",[s._v("(filesystem/io) filelife, biosnoop")]),s._v(" "),a("li",[s._v("(network) sofdsnoop, tcplife, tcpstates, tcpretrans")])]),s._v(" "),a("h2",{attrs:{id:"ãƒ­ã‚°ã®åé›†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ãƒ­ã‚°ã®åé›†"}},[s._v("#")]),s._v(" ãƒ­ã‚°ã®åé›†")]),s._v(" "),a("p",[s._v("åé›†ã«ã¯ä»¥ä¸‹ã® bash script ã‚’åˆ©ç”¨ã—ãŸã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BCC_TOOLS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/openjny/bcc/tools"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PREFIX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"timeout 15s python3 -u"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pid")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pid_sshd.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cpu")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/execsnoop.py -xTU "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" execsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/exitsnoop.py --utc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exitsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# memory")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/drsnoop.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" drsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/shmsnoop.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" shmsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fs/io")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/filelife.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filelife.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/biosnoop.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" biosnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# network")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/sofdsnoop.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sofdsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/tcplife.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" tcplife.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/tcpstates.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" tcpstates.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PREFIX")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BCC_TOOLS")]),s._v("/tcpretrans.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" tcpretrans.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" tcpretrans.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -lt "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Start..."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("\n")])])]),a("p",[s._v("ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¦ã„ã‚‹é–“ã«ã€bcc tools ã¯æ—¢å®šã§å‡ºåŠ›ãƒãƒƒãƒ•ã‚’ä½¿ã†ã‚‚ã®ãŒå¤šãã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæ™‚ã«æ­£å¸¸ã«å‡ºåŠ›ã‚’ãƒ‘ã‚¤ãƒ—ã§ããªã„å•é¡Œã«é­é‡ã€‚ãƒãƒƒãƒ•ã‚¡ãŒé–¢ä¿‚ã—ã¦ã„ãã†ãªã®ã¯ã™ãã‚ã‹ã£ãŸã®ã ãŒã€è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ä½•æ•…ã‹ "),a("code",[s._v("stdbuf")]),s._v(" ãŒåŠ¹ã‹ãšã€python å´ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç™ºè¦‹ã™ã‚‹ã¾ã§ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã£ãŸâ€¦ã€‚ãã—ã¦ã€è§£æ±ºæ–¹æ³•ã¯ issue ãƒšãƒ¼ã‚¸ã«ã‚ã£ãŸã¨ã„ã† ğŸ˜¢")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/iovisor/bcc/issues/905",target:"_blank",rel:"noopener noreferrer"}},[s._v("Stream Redirection Disables All Output Â· Issue #905 Â· iovisor/bcc"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("æ¡å–æ–¹æ³•ã¯ç°¡å˜ã§ã€æ¡å–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ "),a("code",[s._v("sudo")]),s._v(' ã§å®Ÿè¡Œã—ã¦ "Start..." ãŒè¡¨ç¤ºã•ã‚Œã¦ã‹ã‚‰ã€'),a("code",[s._v("ssh")]),s._v(" çµŒç”±ã®ã‚³ãƒãƒ³ãƒ‰ (é…ã„! ã¨å•é¡Œã«ãªã£ã¦ã„ã‚‹ã‚„ã¤) ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã ã‘ã€‚")]),s._v(" "),a("h3",{attrs:{id:"æ¡å–å¾Œã®æ•´å½¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¡å–å¾Œã®æ•´å½¢"}},[s._v("#")]),s._v(" æ¡å–å¾Œã®æ•´å½¢")]),s._v(" "),a("p",[s._v("æ¡å–ã—ãŸ (ã‚¤ãƒ™ãƒ³ãƒˆ ãƒ‰ãƒªãƒ–ãƒ³ãª) ãƒ­ã‚°ã¯ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’å¯¾è±¡ã¨ã—ã¦è¨ˆæ¸¬ã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã®ã¾ã¾ã§ã¯ãƒ­ã‚°ãŒå¤šã™ãã‚‹ã®ã§ã€å¯¾è±¡ "),a("code",[s._v("ssh")]),s._v(" ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã«é–¢ä¿‚ã®ã‚ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ­ã‚°ã ã‘ã‚’æŠ½å‡ºã—ãŸã„ã€‚ã¾ãšã¯ã€"),a("code",[s._v("execsnoop")]),s._v(" ã®çµæœã‹ã‚‰ã€ä»Šå›ã®äº‹è±¡ã«ã‚ˆã£ã¦ "),a("code",[s._v("sshd")]),s._v(" ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸã™ã¹ã¦ã® (å­å­«) ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# extract.py")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" pandas "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pd\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" queue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Queue\n\nEXECSNOOP_LOG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./execsnoop.log'")]),s._v("\nROOT_PID "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1442")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("canonical_columns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cols"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" c "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" cols "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("startswith"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Unnamed:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\ndf_exec "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read_fwf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EXECSNOOP_LOG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndf_exec "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" df_exec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("canonical_columns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("df_exec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("columns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_child_pids")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    q "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root_pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    child_pids "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("empty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        child_pids"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("append"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        childs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'PPID'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'PID'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" c "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" childs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" child_pids\n\npid_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" get_child_pids"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("df_exec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ROOT_PID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'|'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" pid_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("ã“ã„ã¤ã‚’ä½¿ã£ã¦ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒå¿…è¦ãã†ãªãƒ­ã‚°ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¦ãŠãã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pids")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("python3 extract.py"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" filtered\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" execsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$4")]),s._v(" ~ /'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pids")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/) { print } }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filtered/execsnoop.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" exitsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v(" ~ /'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pids")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/) { print } }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filtered/exitsnoop.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" drsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v(" ~ /'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pids")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/) { print } }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filtered/drsnoop.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" shmsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" ~ /'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pids")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/) { print } }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filtered/shmsnoop.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" filelife.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v(" ~ /'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pids")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/) { print } }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filtered/filelife.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" biosnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v(" ~ /'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pids")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/) { print } }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" filtered/biosnoop.log\n")])])]),a("h2",{attrs:{id:"åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†æ"}},[s._v("#")]),s._v(" åˆ†æ")]),s._v(" "),a("h3",{attrs:{id:"cpu-è¦³ç‚¹ã§ã®èª¿æŸ»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpu-è¦³ç‚¹ã§ã®èª¿æŸ»"}},[s._v("#")]),s._v(" CPU è¦³ç‚¹ã§ã®èª¿æŸ»")]),s._v(" "),a("p",[s._v("ã¨ã€ã“ã“ã¾ã§æ¥ã¦åˆã‚ã¦æ°—ã¥ã„ãŸãŒã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒå®Œå…¨ã§ãªã„ã“ã¨ãŒç™ºè¦šã€‚ã¨ã„ã†ã®ã‚‚ã€"),a("code",[s._v("execsnoop")]),s._v(" ã§æ¤œçŸ¥ã§ãã¦ã„ãªã„ãƒ—ãƒ­ã‚»ã‚¹ã®è¤‡è£½/å®Ÿè¡ŒãŒã‚ã‚‹ã“ã¨ã§ã€"),a("code",[s._v("sshd")]),s._v(" ã®å­å­«ãƒ—ãƒ­ã‚»ã‚¹ã®åˆ—æŒ™ãŒä¸å®Œå…¨ãªã‚‚ã®ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ãŸã€‚ãŸã ã€ãã‚Œã§ã‚‚ã„ãã¤ã‹é‡è¦ãªã“ã¨ãŒã‚ã‹ã£ãŸã€‚")]),s._v(" "),a("p",[s._v("ã¾ãšã€å•é¡Œã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚ŒãŸã®ã¯ 14:28:58 ã§ã‚ã‚Šã€ã‚³ãƒãƒ³ãƒ‰å‡¦ç†ã‚’æ‹…å½“ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã® PID ã¯ 27805 ã¨ã—ã¦ç”Ÿæˆã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚‹ã€‚æ™‚åˆ»ã¯å¤§äº‹ãªæƒ…å ±ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" execsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" /usr/sbin/sshd\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     sshd             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27805")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1442")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /usr/sbin/sshd -D -R\n")])])]),a("p",[s._v("æ¬¡ã«ã€å¤šæ•°ã® (å°‘ãªãã¨ã‚‚ 60 ä»¥ä¸Šã®) ãƒ—ãƒ­ã‚»ã‚¹ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã€‚ãã—ã¦ã“ã“ã«ã¯ "),a("code",[s._v("/etc/update-motd.d/*")]),s._v(" ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå¤šãå«ã¾ã‚Œã‚‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" filtered/execsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" filtered/execsnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'update-motd.d'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     run-parts        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27819")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /bin/run-parts --lsbsysinit /etc/update-motd.d\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     00-header        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27821")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/00-header\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("-help-text     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27825")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/10-help-text\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("-landscape-sy  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27826")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/50-landscape-sysinfo\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("-motd-news     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27832")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/50-motd-news\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88")]),s._v("-esm-announce  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27837")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/88-esm-announce\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("-updates-avai  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27838")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/90-updates-available\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v("-contract-ua-  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27840")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/91-contract-ua-esm-status\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v("-release-upgr  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27841")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/91-release-upgrade\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92")]),s._v("-unattended-u  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27849")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/92-unattended-upgrades\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("95")]),s._v("-hwe-eol       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27850")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/95-hwe-eol\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("-overlayroot   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27866")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/97-overlayroot\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("-fsck-at-rebo  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27870")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/98-fsck-at-reboot\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("-reboot-requi  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27876")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27820")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /etc/update-motd.d/98-reboot-required\n")])])]),a("p",[a("code",[s._v("/etc/update-motd.d")]),s._v(" ã¯ Ubuntu ã§ã® MOTD (message of the day) ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¹ãªã®ã§ã€ssh ã¨ã®é–¢é€£æ€§ã¯ç¢ºã‹ã«é«˜ã„ã€‚ã“ã“ã§ã‚ã‹ã£ãŸé‡è¦ãªäº‹å®Ÿã¯ã€ssh çµŒç”±ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸå ´åˆã§ã‚‚ã€(è¡¨ç¤ºã¯ã•ã‚Œãªã„ã®ã«ã‚‚é–¢ã‚ã‚‰ãš) MOTD ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã ã€‚ã“ã‚Œã¯ç„¡é§„ãªå‡¦ç†ã ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚")]),s._v(" "),a("p",[s._v("ç”Ÿå­˜æœŸé–“ã®è¦³ç‚¹ã§ã¯ç‰¹è¨˜ã™ã¹ãç‚¹ã¯è¦‹ã‚‰ã‚Œãªã‹ã£ãŸã€‚æœ€ã‚‚ç”Ÿå­˜æœŸé–“ãŒé•·ã„ãƒ—ãƒ­ã‚»ã‚¹ã¯ä»¥ä¸‹ 3 ã¤ã§ã€0.04 ç§’ç¨‹åº¦ã€‚ãŸã ã€ãã‚Œä»¥å¤–ã¯ç‰¹ã«ç”Ÿå­˜æœŸé–“ãŒé•·ã„ãƒ—ãƒ­ã‚»ã‚¹ã¯ãªãã€ã¾ã‚“ã¹ã‚“ãªãçŸ­ã„å®Ÿè¡Œæ™‚é–“ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå¤šæ•°ç™ºç”Ÿã—ã¦ã„ãŸã¨è€ƒãˆã‚‹ã®ãŒè‰¯ã•ãã†ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" filtered/exitsnoop.log\nTIME-UTC     PCOMM            PID    "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PPID")]),s._v("   TID    AGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  EXIT_CODE\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58.722 lsb_release      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27843")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27842")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27843")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.04")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58.722 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27844")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27842")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27844")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.04")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58.722 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v("-release-upgr  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27842")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27841")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27842")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.04")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),a("h3",{attrs:{id:"ãƒ¡ãƒ¢ãƒªè¦³ç‚¹ã®èª¿æŸ»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ãƒ¡ãƒ¢ãƒªè¦³ç‚¹ã®èª¿æŸ»"}},[s._v("#")]),s._v(" ãƒ¡ãƒ¢ãƒªè¦³ç‚¹ã®èª¿æŸ»")]),s._v(" "),a("p",[s._v("ç‰¹ã«ä»®æƒ³ãƒ¡ãƒ¢ãƒªã®é£½å’Œã¯è¦³æ¸¬ã•ã‚Œã¦ã„ãªã„ã®ã§ã€ä¸€æ—¦å•é¡Œãªã„ã¨è¦‹ãªã—ã¦ã‚ˆã„ã¨æ€ã†ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" drsnoop.log\nCOMM           PID     LAT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" PAGES\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" shmsnoop.log\nPID    COMM                SYS              RET AR\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dmesg")]),s._v(" -T "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("egrep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'oom|Out of memory'")]),s._v("\n")])])]),a("h3",{attrs:{id:"ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€i-o-è¦³ç‚¹ã®èª¿æŸ»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€i-o-è¦³ç‚¹ã®èª¿æŸ»"}},[s._v("#")]),s._v(" ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€I/O è¦³ç‚¹ã®èª¿æŸ»")]),s._v(" "),a("p",[s._v("ã¾ãšã¯ VFS ã§ä½œæˆã•ã‚Œå‰Šé™¤ã•ã‚ŒãŸ file ä¸€è¦§ã‚’è¦‹ã¦ã¿ã‚‹ã€‚"),a("code",[s._v("systemd")]),s._v(" ã§ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ç”Ÿæˆã•ã‚Œã‚‹ã‚‚ã®ãã‚‰ã„ã—ã‹ãªã•ãã†ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" filelife.log\nTIME     PID    COMM             AGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  FILE\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27865")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    tmp.2mxHTbBPCU\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      systemd          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.29")]),s._v("    session-1245.scope\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1352")]),s._v("   systemd-logind   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1245")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("469")]),s._v("    systemd-journal  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(":339183\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("469")]),s._v("    systemd-journal  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.29")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(":339144\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      systemd          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.30")]),s._v("    user-1001.slice\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":28:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1352")]),s._v("   systemd-logind   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v("\n")])])]),a("p",[s._v("ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã¸ã® I/O ã‚‚å­˜åœ¨ã—ãªã„ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã® read ã‚„ write ã§æ™‚é–“ãŒã‹ã‹ã£ã¦ã‚‹ã®ã§ã¯ãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" filtered/biosnoop.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¿µã®ç‚ºã€ç›® grep ã§éå¯¾è±¡ PID ã‚’é™¤å¤–ã—ã¦èª¿æŸ»ã‚‚å®Ÿæ–½")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" biosnoop.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ if ("),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v(" !~ /0|385|17836|17841|17829/) { print } }'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®šå¸¸çš„ã«ç‰©ç† I/O ã‚’ç™ºç”Ÿã•ã›ã¦ã„ã‚‹ PID ã‚’åˆ—æŒ™ã™ã‚‹ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tmp=$(mktemp)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timeout 5s biosnoop.py > $tmp")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat $tmp | awk '{print $3}' | sed '1d' | sort | uniq | paste -sd'|'")]),s._v("\n")])])]),a("h3",{attrs:{id:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦³ç‚¹ã®èª¿æŸ»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦³ç‚¹ã®èª¿æŸ»"}},[s._v("#")]),s._v(" ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦³ç‚¹ã®èª¿æŸ»")]),s._v(" "),a("p",[s._v("tcplife ã§ TCP ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç¢ºç«‹/çµ‚äº†ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’è¦‹ã¦ã¿ã‚‹ã€‚22 ãƒãƒ¼ãƒˆã¨ã®é€šä¿¡ãŒä¸€ã¤å­˜åœ¨ã—ãŸã€‚é€å—ä¿¡ãƒã‚¤ãƒˆæ•°ã‚‚ãã‚Œãã‚Œ 2 KB ã¨å°‘ãªã‚ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" tcplife.log\nPID   COMM       LADDR           LPORT RADDR           RPORT TX_KB RX_KB MS\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     swapper/3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.4        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("local-ip-addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4146")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("659.94")]),s._v("\n")])])]),a("p",[s._v("ã“ã“ã§ã€ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹æ•°ãŒã“ã“ã¾ã§å¤šã„ã¨ã€ä»–ã«ã‚‚é€šä¿¡ã‚’ç™ºç”Ÿã•ã›ã¦ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯ã‚ã‚‹ã®ã§ã¯? ã¨ã„ã†ç–‘å•ãŒç™ºç”Ÿã€‚ã“ã®ãƒ­ã‚°ã‹ã‚‰ã ã‘ã ã¨ãªã‚“ã¨ã‚‚è¨€ãˆãªã„ãŒã€ä½•åº¦ã‹ "),a("code",[s._v("tcplife")]),s._v(" ã®ãƒ­ã‚°ã‚’ã¨ã£ã¦ã‚‹ã¨ã€å½“è©²ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ç™ºç”Ÿã™ã‚‹ TCP ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã¯ 1 æœ¬ã ã‘ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚å®‰å¿ƒã—ã¦ã€ã“ã® TCP ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦èª¿æŸ»ã‚’é€²ã‚ã‚‹ã¨ã™ã‚‹ã€‚")]),s._v(" "),a("p",[s._v("SYN ã‚’é€ã£ã¦ã‹ã‚‰ ESTAB ã«ãªã‚‹ã¾ã§ã®æ™‚é–“ (3-way handshake latency) ã¯ 0.012 ç§’ã€‚å…¨ãå•é¡Œãªã„ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" tcpstates.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ffff8cf3ab844ec0 \n\nSKADDR           C-PID C-COMM     LADDR           LPORT RADDR           RPORT OLDSTATE    -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" NEWSTATE\nffff8cf3ab844ec0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     swapper/3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     LISTEN      -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SYN_RECV    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000")]),s._v("\nffff8cf3ab844ec0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     swapper/3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.4        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("126.149")]),s._v(".198.88  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4146")]),s._v("  SYN_RECV    -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ESTABLISHED "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.012")]),s._v("\nffff8cf3ab844ec0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27805")]),s._v(" sshd       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.4        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("126.149")]),s._v(".198.88  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4146")]),s._v("  ESTABLISHED -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" FIN_WAIT1   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("613.626")]),s._v("\nffff8cf3ab844ec0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     swapper/3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.4        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("126.149")]),s._v(".198.88  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4146")]),s._v("  FIN_WAIT1   -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CLOSING     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.181")]),s._v("\nffff8cf3ab844ec0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     swapper/3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.4        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("126.149")]),s._v(".198.88  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4146")]),s._v("  CLOSING     -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CLOSE       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35.128")]),s._v("\n")])])]),a("p",[s._v("å†é€ã‚‚å­˜åœ¨ã—ã¦ã„ãªã„ã®ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦³ç‚¹ã§ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã®å…†å€™ã¯è¦‹ã‚‰ã‚Œãªã„ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" tcpretrans.log\nTracing retransmits "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". Hit Ctrl-C to end\nTIME     PID    IP LADDR:LPORT          T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" RADDR:RPORT          STATE\n")])])]),a("h3",{attrs:{id:"ä¸€æ¬¡è¦‹è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€æ¬¡è¦‹è§£"}},[s._v("#")]),s._v(" ä¸€æ¬¡è¦‹è§£")]),s._v(" "),a("p",[s._v("å½“è©²ã‚³ãƒãƒ³ãƒ‰ã¯ã€ä»®æƒ³ãƒ¡ãƒ¢ãƒªã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€I/Oã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¦³ç‚¹ã§ã¯ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¨ãªã‚‹ç¨‹ã®å‡¦ç†ã‚’è¦³æ¸¬ã—ã¦ã„ãªã„ã€‚æœ€ã‚‚å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã¯ã€å¤§é‡ã«ãƒ—ãƒ­ã‚»ã‚¹ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã€ç‰¹ã« motd ã«ã‚ˆã£ã¦ç„¡é§„ãªãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºå”†ã•ã‚ŒãŸã€‚")]),s._v(" "),a("h2",{attrs:{id:"å¯¾å¿œç­–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¾å¿œç­–"}},[s._v("#")]),s._v(" å¯¾å¿œç­–")]),s._v(" "),a("p",[a("code",[s._v("systemd")]),s._v(" ã®å‹•ä½œã‚’èª¿ã¹ã‚‹ã®ã¯æ™‚é–“ãŒã‹ã‹ã‚Šãã†ã ã£ãŸã®ã§ã€"),a("code",[s._v("/etc/update-motd.d")]),s._v(" è‡ªä½“ã‚’å‰Šé™¤ã™ã‚‹ã¨ã„ã†å˜ç´”ãªæ–¹æ³•ã§å¯¾å¿œã‚’ã—ã¦ã¿ã‚‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("root@vm-ubuntu:/etc"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv /etc/update-motd.d/ /etc/update-motd.d.old")]),s._v("\n")])])]),a("h3",{attrs:{id:"after-ssh-çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#after-ssh-çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬"}},[s._v("#")]),s._v(" After: ssh çµŒç”±ã‚³ãƒãƒ³ãƒ‰ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬")]),s._v(" "),a("p",[s._v("å¯¾å¿œå¾Œã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’ä½•åº¦ã‹è¨ˆæ¸¬ã—ã¦ã¿ãŸã€‚ç¢ºã‹ã« 1 ç§’ä»¥ä¸Šæ™‚é–“ãŒã‹ã‹ã‚‹ã‚ˆã†ãªã“ã¨ã¯ãªããªã‚Šã€æ”¹å–„ãŒè¦‹ã‚‰ã‚ŒãŸã€‚")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("openjny@local-machine:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" openjny@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("lab-machine"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" -i id_rsa "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" hello\nhello\n\nreal    0m0.598s\nuser    0m0.034s\nsys     0m0.012s\n")])])]),a("p",[s._v("ã¾ãŸã€"),a("code",[s._v("execsnoop")]),s._v(" ã§å®Ÿè¡Œã•ã‚Œã‚‹ãƒ—ãƒ­ã‚»ã‚¹æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¦ã¿ã‚‹ã¨ã€å¯¾å¿œå‰ 60 ä»¥ä¸Šã‚ã£ãŸå­å­«ãƒ—ãƒ­ã‚»ã‚¹ãŒã€10 ç¨‹åº¦ã«æŠ‘ãˆã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ç¢ºèªã§ããŸã€‚")]),s._v(" "),a("h2",{attrs:{id:"ã¾ã¨ã‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã¾ã¨ã‚"}},[s._v("#")]),s._v(" ã¾ã¨ã‚")]),s._v(" "),a("p",[s._v("ä»Šå›ã®èª²é¡Œã§ã¯ã€éå¸¸ã«ç”Ÿå­˜æ™‚é–“ãŒçŸ­ãã€ã‹ã¤äº‹å‰ã«ã‚ã‹ã£ã¦ã„ã‚‹ã®ã¯ "),a("code",[s._v("fork")]),s._v(" å…ƒã®ãƒ—ãƒ­ã‚»ã‚¹ ID ã ã‘ã€ã¨ã„ã†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’å¢—åŠ ã•ã›ã¦ã„ã‚‹åŸå› ã‚’èª¿æŸ»ã—ã¾ã—ãŸã€‚WEB ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã® GET è¦æ±‚ç­‰ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¶Šã—ã®å‡¦ç†ã¯ãŠãã‚‰ãã“ã®ã‚ˆã†ãªã‚·ãƒŠãƒªã‚ªã«è©²å½“ã™ã‚‹ã®ã ã‚ã†ã€‚")]),s._v(" "),a("p",[s._v("ãã—ã¦ã€"),a("code",[s._v("strace")]),s._v(" ã‚„ "),a("code",[s._v("tcpdump")]),s._v(" ç­‰ãŒä½¿ãˆãªã„ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªã‚µãƒ¼ãƒãƒ¼ç’°å¢ƒã§ã‚‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã”ã¨ã«ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰è¨ˆæ¸¬ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚ååˆ†ã¨ã¯è¨€ãˆãªã„ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€å®Ÿéš›ã«ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨ã®ã§ãã‚‹å¯¾å¿œã‚’è€ƒãˆã¤ãã“ã¨ãŒå‡ºæ¥ãŸã®ã§ã€æœ€ä½é™ã®ã¨ã“ã‚ã¾ã§ã¯å¯¾å¿œã§ããŸã¨æ€ã„ã¾ã™ã€‚")]),s._v(" "),a("p",[s._v("ãŸã ã€"),a("code",[s._v("systemd")]),s._v(" ã®å‹•ä½œãŒã‚ã‹ã£ã¦ã„ã‚Œã°ã‚ˆã‚Šãƒ—ãƒ­ã‚»ã‚¹é–“ã®é–¢ä¿‚ã€ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ã®æ„å‘³ãŒè§£é‡ˆã—ã‚„ã™ã‹ã£ãŸã®ã ã‚ã†ã¨æ€ã†ã¨ã€ã‚„ã¯ã‚Šå†…éƒ¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’çŸ¥ã£ã¦ã„ã‚‹ã“ã¨ã¯é‡è¦ã§ã‚ã‚‹ã“ã¨ã‚’æ”¹ã‚ã¦æ„Ÿã˜ãŸã€‚ã¾ãŸã€ä»Šå›ã¯ bcc ã ã‘ã§ä¹—ã‚Šåˆ‡ã£ãŸã‘ã©ã€"),a("code",[s._v("bpftrace")]),s._v(" ã§ã ã‘æä¾›ã•ã‚Œã¦ã„ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒ„ãƒ¼ãƒ«ç­‰ã‚‚ç™ºè¦‹ã—ãŸã®ã§ã€ä»Šå¾Œæ´»ç”¨ã—ã¦ã„ããŸã„ã€‚")])])}),[],!1,null,null,null);t.default=n.exports}}]);